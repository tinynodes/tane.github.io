<!doctype html><html lang=en-gb prefix="og: https://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.111.3"><title>Takeoff - Development tutorials for modern web development</title><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,800" rel=stylesheet><link rel=stylesheet href=https://pro.fontawesome.com/releases/v5.7.2/css/all.css integrity=sha384-6jHF7Z3XI3fF4XZixAuSu0gGKrXwoX/w3uFPxC56OtjChio7wtTGJWRW53Nhx6Ev crossorigin=anonymous><link rel=stylesheet href=https://tane.dev/css/bundle.min.c2e4851d86d378b94d217eb138010f3338a9a41dbe246b7dc2c3fb5364d00a978fd2595df8bb2d30354eae35fd3895f5c7724e01082268c043ba77f50a56e091.css integrity="sha512-wuSFHYbTeLlNIX6xOAEPMzippB2+JGt9wsP7U2TQCpeP0lld+LstMDVOrjX9OJX1x3JOAQgiaMBDunf1ClbgkQ=="><link rel=alternate type=application/rss+xml href=https://tane.dev/takeoff/index.xml title=tane.dev><meta property="og:image" content="https://www.mugshotbot.com/m?mode=light&theme=two_up&pattern=lines_in_motion&image=d3d350d5&hide_watermark=true&url=https://tane.dev/takeoff/"><meta name=twitter:image content="https://www.mugshotbot.com/m?mode=light&theme=two_up&pattern=lines_in_motion&image=d3d350d5&hide_watermark=true&url=https://tane.dev/takeoff/"><meta property="og:title" content="Takeoff"><meta name=twitter:title content="Takeoff"><meta name=twitter:card content="summary_large_image"><meta property="og:description" content="Development tutorials for modern web development"><meta name=twitter:description content="Development tutorials for modern web development"><meta property="og:url" content="https://tane.dev/takeoff/"><meta property="og:site_name" content="tane.dev"><meta property="og:type" content="website"><script src=https://cdn.usefathom.com/script.js data-site=HNGWYVWJ defer></script>
<link rel=webmention href=https://webmention.io/tane.dev/webmention><link rel=pingback href=https://webmention.io/tane.dev/xmlrpc></head><body class=light><div class=container-left><div class=row><div class="column sidebar"><div class=sidebar-content><h1 class="site-title flex-item flex-start" title="The title of the site tane.dev - click it to go back to the homepage" aria-label="The title of the site tane.dev - click it to go back to the homepage"><a href=https://tane.dev title="Click here to go back to the home page">tane.dev</a></h1><h2 class="flex-item subtitle" title="The subtitle of the site, is has a brain in it which makes the assumption the author has one" aria-label="The subtitle of the site, is has a brain in it which makes the assumption the author has one">[ <i class="far fa-head-side-brain"></i> ideas <sup>& stuff</sup> ]</h2><aside class=menu><ul class="sidebar-menus menu-list"><li>&#187; <a href=https://tane.dev/about>About</a></li><li>&#187; <a href=https://tane.dev/projects>Projects</a></li></ul><h3 class=menu-label title="A recent list of posts I've somehow managed to write down"><i class="far fa-keyboard"></i> Recent Posts:</h3><ul class=previous-posts><li><a href=https://tane.dev/2023/04/i-think-i-found-a-privacy-exploit-in-chatgpt/>I Think I Found a Privacy Exploit in ChatGPT</a>
<span>Published: Apr 14, 2023</span></li><li><a href=https://tane.dev/2021/02/announcing-formula-a-zero-config-reactive-forms-library-for-svelte/>Announcing Formula - A Zero-Config Reactive Forms Library for Svelte</a>
<span>Published: Feb 13, 2021</span></li><li><a href=https://tane.dev/2021/02/revisiting-dark-patterns-with-the-html-dialog-tag/>Revisiting Dark patterns with the HTML &lt;dialog> tag</a>
<span>Published: Feb 8, 2021</span></li><li><a href=https://tane.dev/2021/02/webserial.app-browser-to-usb-serial-communication-with-svelte/>WebSerial.app - Browser to USB Serial Communication With Svelte</a>
<span>Published: Feb 5, 2021</span></li><li><a href=https://tane.dev/2021/01/web-serial-api-with-rxjs-two-way-reactive-communication-between-browser-and-serial-hardware/>Web Serial API with RxJS - Two-Way Reactive Communication between Browser and Serial Hardware</a>
<span>Published: Jan 30, 2021</span></li></ul><a href=https://tane.dev/archive>All Previous Posts &rang;</a><div class=feed><a href=https://tane.dev/index.xml><i class="far fa-rss-square"></i>&nbsp;RSS Feed</a></div></aside><div class=service-buttons><a class=flex-item href=https://github.com/tanepiper title="Link to my Github" target=_new rel=me><i class='fab fa-github-alt'></i></a>
<a class=flex-item href=https://linkedin.com/in/tanepiper title="Link to my LinkedIn" target=_new rel=me><i class='fab fa-linkedin'></i></a>
<a class=flex-item href=https://tane.codes/@tanepiper title="Link to my Mastodon" target=_new rel=me><i class='fab fa-mastodon'></i></a></div><footer class=footer><div class="flex-item contact"><i class="far fa-copyright"></i>&nbsp;2023 Tane Piper
<a href=mailto: title="I promise I check this from time to time" aria-label="I promise I check this from time to time"><i class="far fa-mailbox"></i>&nbsp;Email into the void</a></div><div class="flex-item meta"><div><i class="fas fa-hammer"></i>&nbsp;Site built with <a href=http://gohugo.io>Hugo</a> 0.111.3 <a href=https://tane.dev/about title="Click on this link to go to the about page"><sup>[about]</sup></a></div><div><i class="far fa-business-time"></i> Last modified 2023-04-15 10:55</div></div></footer><div class=theme-buttons><div class="flex-item button-group-label">Theme:</div><button class="flex-item btn btn-circle btn-theme btn-light" data-theme=light title="Click this button for the light theme" aria-label="Click this button for the light theme">
<button class="flex-item btn btn-circle btn-theme btn-dark" data-theme=dark title="Click this button for the dark theme" aria-label="Click this button for the dark theme">
<button class="flex-item btn btn-circle btn-theme btn-darkgreen" data-theme=darkgreen title="Click this button for the darkgreen theme" aria-label="Click this button for the darkgreen theme"></div></div><style type=text/css>.previous-posts li{flex-direction:column}.previous-posts li span{margin-left:.5rem;border-left:1px solid #d3d3d3;justify-content:right}</style></div><main class="column main"><div class=post><div class=post-heading><h1><a href=https://tane.dev/2023/04/i-think-i-found-a-privacy-exploit-in-chatgpt/>I Think I Found a Privacy Exploit in ChatGPT</a></h1><div class=meta><i class="far fa-calendar-edit" title="The date when this post was originally published" aria-label="The date when this post was originally published"></i><span>&nbsp;Published: Apr 14, 2023</span>
&nbsp;<span title="The date I last noticed a typo" aria-label="The date I last noticed a typo">(last updated: Apr 14, 2023)</span>
|&nbsp;<i class="far fa-pencil" title="The number of semi-coherent words I managed to produce" aria-label="The number of semi-coherent words I managed to produce"></i><span>~ 1800 words</span>
|&nbsp;<i class="far fa-clock" title="Time is an illusion. Lunchtime doubly so" aria-label="Time is an illusion. Lunchtime doubly so"></i><span>~ 9 minutes reading time</span></div><div class=tags title="Click the links in this to go to a page based on a tag value" aria-label="Click the links in this to go to a page based on a tag value"><a class=flex-item href=https://tane.dev/tags/openai>OpenAI</a>
<a class=flex-item href=https://tane.dev/tags/chatgpt>ChatGPT</a>
<a class=flex-item href=https://tane.dev/tags/llm>LLM</a>
<a class=flex-item href=https://tane.dev/tags/ai>AI</a></div></div><div class=post-content><p><code>> tl;dr: I discovered that passing empty prompts to ChatGPT still</code> <a href=https://stochasticparrot.lol/ target=_blank>generates responses</a>
<code>Initially, I thought these might be hallucinations, but now I suspect they could also include other users' responses from the API</code></p><p>Last month, OpenAI unveiled their advanced large language model, <a href=https://openai.com/product/gpt-4 target=_blank>ChatGPT-4</a>
, attracting attention from developers, enterprises, media, and <a href=https://www.theguardian.com/technology/2023/mar/31/italy-privacy-watchdog-bans-chatgpt-over-data-breach-concerns target=_blank>governments</a>
alike.</p><p>Before receiving my GPT-4 invite, I experimented with <a href=ttps://github.com/antimatter15/alpaca.cpp>alpaca.cpp</a>
, designed to run models on CPU&rsquo;s with limited memory constraints. I began by developing a simple web interface using NodeJS and sockets for parsing the command line. Once I started working with the GPT-4 API, I quickly realized that with the right prompts, it could be a powerful tool. It has already helped me rewrite complex code into simpler methods and reduce complexity by moving code to functions:</p><div style=text-align:center><img src=https://tane.dev/images/chatgpt-code-improvement.png width=60% height=60% alt="Screenshot of ChatGPT suggesting a code improvement for creating tables by proposing a cell creation method"></div><p>However, I noticed something peculiar ‚Äî due to a bug in my code, I was sending empty prompts to the ChatGPT endpoint, but I still received seemingly random responses ranging from standard AI model introductions to information about people, places, and concepts. Inspired by the coinciding <a href=https://dl.acm.org/doi/10.1145/3442188.3445922 target=_blank>#StochasticParrotsDay</a>
online conference, I transformed this into a <a href=https://mastodon.social/@StochasticEntropy target=_blank>Mastodon Bot</a>
(now moved to <a href=https://botsin.space/@StochasticEntropy target=_blank>botsin.space</a>
).</p><p>After running the bot for a month, I concluded that a significant portion of the responses without prompts <strong>might be responses for other users</strong>, potentially due to a bug that sends unintended responses when given an unsanitized empty prompt.</p><p>These could be stochastic hallucinations, random training data pulled out by <a href=https://en.wikipedia.org/wiki/Entropy_%28information_theory%29 target=_blank>Entropy</a>
, or a mix of all three possibilities.</p><p>If this is the case, then ChatGPT would not be much better than a <a href=https://en.wikipedia.org/wiki/Markov_chain target=_blank>Markov Chain</a>
, and the entire large language model/AI market has been playing us for fools.</p><p><em>However if I am correct</em> then the current OpenAI APIs could be made to potentially leak private or sensitive data, by simply not sanatising their inputs&mldr;</p><p>The bot will continue to run until at least the end of this month, and all the content will be archive at <a href=https://stochasticparrot.lol target=_blank>stochasticparrot.lol</a>
.</p><h3 id=summary-of-what-it-could-be>Summary of what it could be?</h3><p>I have three pet theories around what&rsquo;s happening here. I&rsquo;ve submitted this to <a href=https://openai.com/security.txt target=_blank>OpenAI&amp;rsquo;s Disclosue</a>
and <a href=https://bugcrowd.com/submissions/fc6ca74b-5883-44c2-a63e-ca970ca819b8 target=_blank>BugBounty</a></p><ul><li>These are impressive hallucinations, possibly sparks of AGI, but sometimes they become nonsensical and or the output is concerning, especially around personal medical questions.</li><li>ChatGPT randomly accesses its corpus and regurgitates data in some form. It <em>really</em> loves generating lists.</li><li>There is a bug, potentially a serious one. If the empty prompt issue is more thoroughly investigated, it might confirm that passing no prompt returns cached or previous responses.</li></ul><p>It would be interesting if all three theories were true&mldr;</p><h3 id=update-bug-bounty-reponse>Update: Bug Bounty Reponse</h3><p>I&rsquo;ve since had a reply on <a href=https://bugcrowd.com/submissions/fc6ca74b-5883-44c2-a63e-ca970ca819b8 target=_blank>Bugcrowd</a>
about this - <strong>Cooties</strong> closed it as <code>Not Applicable</code> with the following response:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>Hi</span> <span style=color:#a6e22e>tanepiper</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Thank</span> <span style=color:#a6e22e>you</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>submission</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>OpenAI</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>committed</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>making</span> <span style=color:#a6e22e>AI</span> <span style=color:#a6e22e>safe</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>useful</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>everyone</span>. <span style=color:#a6e22e>Before</span> <span style=color:#a6e22e>releasing</span> <span style=color:#a6e22e>a</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>system</span>, <span style=color:#a6e22e>we</span> <span style=color:#a6e22e>thoroughly</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>it</span>, 
</span></span><span style=display:flex><span><span style=color:#66d9ef>get</span> <span style=color:#a6e22e>expert</span> <span style=color:#a6e22e>feedback</span>, <span style=color:#a6e22e>improve</span> <span style=color:#a6e22e>its</span> <span style=color:#a6e22e>behavior</span>, <span style=color:#a6e22e>and</span> <span style=color:#66d9ef>set</span> <span style=color:#a6e22e>up</span> <span style=color:#a6e22e>safety</span> <span style=color:#a6e22e>measures</span>. <span style=color:#a6e22e>While</span> <span style=color:#a6e22e>we</span> <span style=color:#a6e22e>work</span> <span style=color:#a6e22e>hard</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>prevent</span> <span style=color:#a6e22e>risks</span>, 
</span></span><span style=display:flex><span><span style=color:#a6e22e>we</span> <span style=color:#a6e22e>can</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>t</span> <span style=color:#a6e22e>predict</span> <span style=color:#a6e22e>every</span> <span style=color:#a6e22e>way</span> <span style=color:#a6e22e>people</span> <span style=color:#a6e22e>will</span> <span style=color:#a6e22e>use</span> <span style=color:#a6e22e>or</span> <span style=color:#a6e22e>misuse</span> <span style=color:#a6e22e>our</span> <span style=color:#a6e22e>technology</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>real</span> <span style=color:#a6e22e>world</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Model</span> <span style=color:#a6e22e>safety</span> <span style=color:#a6e22e>issues</span> <span style=color:#66d9ef>do</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>fit</span> <span style=color:#a6e22e>well</span> <span style=color:#a6e22e>within</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>bug</span> <span style=color:#a6e22e>bounty</span> <span style=color:#a6e22e>program</span>, <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>they</span> <span style=color:#a6e22e>are</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>individual</span>, <span style=color:#a6e22e>discrete</span> <span style=color:#a6e22e>bugs</span> <span style=color:#a6e22e>that</span> <span style=color:#a6e22e>can</span> <span style=color:#a6e22e>be</span> <span style=color:#a6e22e>directly</span> <span style=color:#a6e22e>fixed</span>. 
</span></span><span style=display:flex><span><span style=color:#a6e22e>Addressing</span> <span style=color:#a6e22e>these</span> <span style=color:#a6e22e>issues</span> <span style=color:#a6e22e>often</span> <span style=color:#a6e22e>involves</span> <span style=color:#a6e22e>substantial</span> <span style=color:#a6e22e>research</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>broader</span> <span style=color:#a6e22e>approach</span>. <span style=color:#a6e22e>To</span> <span style=color:#a6e22e>ensure</span> <span style=color:#a6e22e>that</span> <span style=color:#a6e22e>these</span> <span style=color:#a6e22e>concerns</span> <span style=color:#a6e22e>are</span> <span style=color:#a6e22e>properly</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>addressed</span>, <span style=color:#a6e22e>please</span> <span style=color:#a6e22e>report</span> <span style=color:#a6e22e>them</span> <span style=color:#a6e22e>using</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>appropriate</span> <span style=color:#a6e22e>form</span>, <span style=color:#a6e22e>rather</span> <span style=color:#a6e22e>than</span> <span style=color:#a6e22e>submitting</span> <span style=color:#a6e22e>them</span> <span style=color:#a6e22e>through</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>bug</span> <span style=color:#a6e22e>bounty</span> <span style=color:#a6e22e>program</span>. 
</span></span><span style=display:flex><span><span style=color:#a6e22e>Reporting</span> <span style=color:#a6e22e>them</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>right</span> <span style=color:#a6e22e>place</span> <span style=color:#a6e22e>allows</span> <span style=color:#a6e22e>our</span> <span style=color:#a6e22e>researchers</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>use</span> <span style=color:#a6e22e>these</span> <span style=color:#a6e22e>reports</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>improve</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Issues</span> <span style=color:#a6e22e>related</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>content</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>prompts</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>responses</span> <span style=color:#a6e22e>are</span> <span style=color:#a6e22e>strictly</span> <span style=color:#a6e22e>out</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>scope</span>, <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>will</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>be</span> <span style=color:#a6e22e>rewarded</span> <span style=color:#a6e22e>unless</span> <span style=color:#a6e22e>they</span> <span style=color:#a6e22e>have</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>an</span> <span style=color:#a6e22e>additional</span> <span style=color:#a6e22e>directly</span> <span style=color:#a6e22e>verifiable</span> <span style=color:#a6e22e>security</span> <span style=color:#a6e22e>impact</span> <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>an</span> <span style=color:#66d9ef>in</span><span style=color:#f92672>-</span><span style=color:#a6e22e>scope</span> <span style=color:#a6e22e>service</span> (<span style=color:#a6e22e>described</span> <span style=color:#a6e22e>below</span>).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Examples</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>safety</span> <span style=color:#a6e22e>issues</span> <span style=color:#a6e22e>which</span> <span style=color:#a6e22e>are</span> <span style=color:#a6e22e>out</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>scope</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Jailbreaks</span><span style=color:#f92672>/</span><span style=color:#a6e22e>Safety</span> <span style=color:#a6e22e>Bypasses</span> (<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>g</span>. <span style=color:#a6e22e>DAN</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>related</span> <span style=color:#a6e22e>prompts</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Getting</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>say</span> <span style=color:#a6e22e>bad</span> <span style=color:#a6e22e>things</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>you</span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Getting</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>tell</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>how</span> <span style=color:#a6e22e>to</span> <span style=color:#66d9ef>do</span> <span style=color:#a6e22e>bad</span> <span style=color:#a6e22e>things</span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Getting</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>write</span> <span style=color:#a6e22e>malicious</span> <span style=color:#a6e22e>code</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>you</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Model</span> <span style=color:#a6e22e>Hallucinations</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Getting</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>pretend</span> <span style=color:#a6e22e>to</span> <span style=color:#66d9ef>do</span> <span style=color:#a6e22e>bad</span> <span style=color:#a6e22e>things</span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Getting</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>pretend</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>give</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>answers</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>secrets</span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#a6e22e>Getting</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>pretend</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>be</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>computer</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>execute</span> <span style=color:#a6e22e>code</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Best</span> <span style=color:#a6e22e>regards</span>,
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> <span style=color:#a6e22e>Cooties</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=setting-up-the-bot-infrastucture>Setting up the Bot Infrastucture</h3><p>To get the bot up and running, I wanted to do it for free, and easy to manage. In the end I opted to use <a href=https://github.com/tanepiper/Stochastic-Parrot/actions target=_blank>GitHub Actions</a>
with scheduled tasks to create it - this allowed me to set up a script that ran hourly - calling the ChatGPT API with an empty
prompt, and turning it into a toot. I also found that passing only a space character to the Dall-E API also produced images.</p><p>With both scripts, after getting a response from OpenAI, I use it to generate one or more toots - depending on the length as a set of replies, with the images
first download them and then upload them as attachments first.</p><p>Some of the more recent toots are below - ones with a parrot emjoi (ü¶ú) are created without a prompt, while if a prompt is used I add a speech bubble (üí¨)
to indicate</p><div class=toots><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-11T09:03:19.174Z>April 11, 2023 09:03</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110179372181905353 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110179372181905353?type=reply"></a>
1</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110179372181905353?type=reblog"></a>
1</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110179372181905353?type=favourite"></a>
0</span></div></section><div class="e-content p-name"><p>ü¶ú My opinion as an AI language model is that South Korea should not ban tattoos. Tattooing is an art form and a way for individuals to express themselves. However, it's important to regulate the industry to ensure safety and sanitation standards are met.</p><p>As in many countries, tattoos have been historically associated with gang culture in South Korea. Since times have changed, this perception has shifted with more people viewing tattoos as a form of</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a></p></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a></article><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-13T08:03:30.376Z>April 13, 2023 08:03</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110190461607813616 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110190461607813616?type=reply"></a>
1</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110190461607813616?type=reblog"></a>
0</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110190461607813616?type=favourite"></a>
0</span></div></section><div class="e-content p-name"><p>ü¶ú Yes, it's possible and actually quite common to be attracted to fictional characters. This can happen for many reasons:</p><p>1. Relatability: People often become attached to characters they find relatable or who share similar experiences, struggles, or personality traits.</p><p>2. Idealization: Fiction allows authors and creators to build their ideal version of a character - one that is intelligent, attractive and the epitome of ideals people crave.</p><p>3. Wish fulfillment:</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a></p></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a></article><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-13T12:41:11.863Z>April 13, 2023 12:41</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110191553533394032 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110191553533394032?type=reply"></a>
0</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110191553533394032?type=reblog"></a>
1</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110191553533394032?type=favourite"></a>
1</span></div></section><div class="e-content p-name"><p>ü¶ú</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://botsin.space/tags/AIArt class="mention hashtag" rel=tag>#<span>AIArt</span></a> <a href=https://botsin.space/tags/AIArtwork class="mention hashtag" rel=tag>#<span>AIArtwork</span></a></p><div class="toot-photos space-evenly"><img src=https://files.botsin.space/media_attachments/files/110/191/553/363/416/331/small/0eb3dae96dfda202.webp alt="An file generated by ChatGPT with no prompt">
<img src=https://files.botsin.space/media_attachments/files/110/191/553/453/362/175/small/e8a00194863d6dc1.webp alt="An file generated by ChatGPT with no prompt"></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://botsin.space/tags/aiart style=display:none>aiart</a>
<a class=p-category href=https://botsin.space/tags/AIArtwork style=display:none>AIArtwork</a></article><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-05T11:03:00.654Z>April 5, 2023 11:03</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110145868965392637 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110145868965392637?type=reply"></a>
1</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110145868965392637?type=reblog"></a>
1</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110145868965392637?type=favourite"></a>
1</span></div></section><div class="e-content p-name"><p>ü¶ú Here are the ten most-used emojis in the world:</p><p>1. üòÇ Face with Tears of Joy<br>2. ‚ù§Ô∏è Red heart<br>3. üòç Smiling Face with Heart-Eyes<br>4. ü§£ Rolling on the Floor Laughing<br>5. üòä Smiling Face with Smiling Eyes<br>6. üëç Thumbs Up<br>7. üíï Two Hearts<br>8. üôè Hands folded in prayer or thank you gesture (also considered a high-five)<br>9. üî• Fire, representing something being hot or exciting.<br>10:üòò Face Blowing a Kiss</p><p>These rankings may vary slightly depending on geographical</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a></p></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a></article></div><p>Once I had this up and running, I then created a small <a href=https://astro.build target=_blank>AstroJS</a>
<a href=https://stochasticparrot.lol/ target=_blank>website</a>
that outputs each entry as a posting.</p><h3 id=making-polly-speak>Making Polly Speak</h3><p>Up to this point, I had just been working with text and images - but I had recently seen <a href=http://elevenlabs.io/ target=_blank>ElevenLabs</a>
in some tech news, and that they had a text-to-speech API. After some initial issues (which used up all of the free credit) - I eventually set up another action that took the OpenAI response, and passed it to the ElevenLabs API - this then provided a MP3 stream of the speech, saved locally and again upload to Mastodon and attach to a toot.</p><div class=toots><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-12T12:10:24.850Z>April 12, 2023 12:10</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110185770178541894 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110185770178541894?type=reply"></a>
0</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110185770178541894?type=reblog"></a>
0</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110185770178541894?type=favourite"></a>
0</span></div></section><div class="e-content p-name"><p>ü¶ú</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://botsin.space/tags/AIArt class="mention hashtag" rel=tag>#<span>AIArt</span></a> <a href=https://botsin.space/tags/AIArtwork class="mention hashtag" rel=tag>#<span>AIArtwork</span></a></p><div class="toot-photos space-evenly"><div class=audio-player><audio controls><source src=https://files.botsin.space/media_attachments/files/110/185/769/485/051/944/original/fec9e2e32454f2b8.mp3 type=audio/mpeg></audio></div></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://botsin.space/tags/aiart style=display:none>aiart</a>
<a class=p-category href=https://botsin.space/tags/AIArtwork style=display:none>AIArtwork</a></article><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-09T12:10:41.733Z>April 9, 2023 12:10</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110168784353949948 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110168784353949948?type=reply"></a>
0</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110168784353949948?type=reblog"></a>
1</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110168784353949948?type=favourite"></a>
2</span></div></section><div class="e-content p-name"><p>ü¶ú</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://botsin.space/tags/AIArt class="mention hashtag" rel=tag>#<span>AIArt</span></a> <a href=https://botsin.space/tags/AIArtwork class="mention hashtag" rel=tag>#<span>AIArtwork</span></a></p><div class="toot-photos space-evenly"><div class=audio-player><audio controls><source src=https://files.botsin.space/media_attachments/files/110/168/783/682/837/348/original/500ad66ed4adbf09.mp3 type=audio/mpeg></audio></div></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://botsin.space/tags/aiart style=display:none>aiart</a>
<a class=p-category href=https://botsin.space/tags/AIArtwork style=display:none>AIArtwork</a></article></div><p>I also decided to try see if I could get it to generate some polls. With some <a href=https://github.com/tanepiper/Stochastic-Parrot/blob/main/packages/stochastic-parrot/src/poll.mjs#L34 target=_blank>gentle prompting</a>
I was able to get it to generate JSON output which could be used in polls. Sadly, most of the time it seems to repeat the same questions over and over with just slightly different wording, occasionally coming up with something original</p><div class=toots><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-11T00:07:58.060Z>April 11, 2023 00:07</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110177267093115752 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110177267093115752?type=reply"></a>
1</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110177267093115752?type=reblog"></a>
3</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110177267093115752?type=favourite"></a>
1</span></div></section><div class="e-content p-name"><p>ü¶ú Which of these fictional cities would you like to visit?</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://botsin.space/tags/Poll class="mention hashtag" rel=tag>#<span>Poll</span></a></p><div class=poll><ul><li>Gotham City from Batman (0)</li><progress value=0 max=100></progress><li>Hogwarts from Harry Potter (8)</li><progress value=61 max=100></progress><li>Westeros from Game of Thrones (3)</li><progress value=23 max=100></progress><li>Panem from The Hunger Games (2)</li><progress value=15 max=100></progress></ul><span>Total Votes: 13</span></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://botsin.space/tags/poll style=display:none>poll</a></article><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.botsin.space/accounts/avatars/110/108/341/878/578/457/original/a54913f9f00eec02.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-04-09T16:02:47.482Z>April 9, 2023 16:02</time><span> | <a class=u-syndication href=https://botsin.space/@StochasticEntropy/110169696990297704 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://botsin.space/interact/110169696990297704?type=reply"></a>
2</span>
<span><a class='fas fa-retweet' href="https://botsin.space/interact/110169696990297704?type=reblog"></a>
9</span>
<span><a class='fas fa-star' href="https://botsin.space/interact/110169696990297704?type=favourite"></a>
1</span></div></section><div class="e-content p-name"><p>ü¶ú Which exotic fruit would you like to try?</p><p><a href=https://botsin.space/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://botsin.space/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://botsin.space/tags/Poll class="mention hashtag" rel=tag>#<span>Poll</span></a></p><div class=poll><ul><li>Durian - The King of Fruits (25)</li><progress value=37 max=100></progress><li>Salak - The Snake Fruit (10)</li><progress value=15 max=100></progress><li>Mangosteen - Queen of Fruits (22)</li><progress value=33 max=100></progress><li>Rambutan - Hairy Lychee (9)</li><progress value=13 max=100></progress></ul><span>Total Votes: 66</span></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://botsin.space/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://botsin.space/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://botsin.space/tags/poll style=display:none>poll</a></article></div><p>I even went as far as trying to generate video content - not through Stable Diffusion, but by generating text themes to use with the <a href=https://creatomate.com/ target=_blank>Createomate</a>
API - allowing me to generate social media &ldquo;fact&rdquo; videos. Unfortunatly this was a bit buggy, and due to the way Mastodon works can time out quite a bit.</p><div class=toots><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.mastodon.social/accounts/avatars/110/040/867/511/382/207/original/5f9b9ea5a76bd34d.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-03-28T02:03:49.360Z>March 28, 2023 02:03</time><span> | <a class=u-syndication href=https://mastodon.social/@StochasticEntropy/110098450307316137 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://mastodon.social/interact/110098450307316137?type=reply"></a>
0</span>
<span><a class='fas fa-retweet' href="https://mastodon.social/interact/110098450307316137?type=reblog"></a>
0</span>
<span><a class='fas fa-star' href="https://mastodon.social/interact/110098450307316137?type=favourite"></a>
0</span></div></section><div class="e-content p-name"><p>ü¶ú</p><p><a href=https://mastodon.social/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://mastodon.social/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://mastodon.social/tags/AIArt class="mention hashtag" rel=tag>#<span>AIArt</span></a> <a href=https://mastodon.social/tags/AIArtwork class="mention hashtag" rel=tag>#<span>AIArtwork</span></a></p><div class="toot-photos space-evenly"><div class=video-player><video controls>
<source src=https://files.mastodon.social/media_attachments/files/110/098/449/439/163/795/original/10a52f36331aab31.mp4></video></div></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://mastodon.social/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://mastodon.social/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://mastodon.social/tags/aiart style=display:none>aiart</a>
<a class=p-category href=https://mastodon.social/tags/aiartwork style=display:none>aiartwork</a></article><article class="toot h-entry"><section class=toot-header><div class=inner><div rel=author class="h-card p-author toot-avatar"><img class=u-photo width=50 src=https://files.mastodon.social/accounts/avatars/110/040/867/511/382/207/original/5f9b9ea5a76bd34d.png>
<span style=display:none>Polly the Stochastic Parrot</span></div><p class=date>Tooted on <time class=dt-published datetime=2023-03-29T19:50:44.985Z>March 29, 2023 19:50</time><span> | <a class=u-syndication href=https://mastodon.social/@StochasticEntropy/110108307946256616 target=_blank>Original Toot</a></span></p></div><div class=toot-social><span><a class='fas fa-share' href="https://mastodon.social/interact/110108307946256616?type=reply"></a>
0</span>
<span><a class='fas fa-retweet' href="https://mastodon.social/interact/110108307946256616?type=reblog"></a>
0</span>
<span><a class='fas fa-star' href="https://mastodon.social/interact/110108307946256616?type=favourite"></a>
0</span></div></section><div class="e-content p-name"><p>ü¶ú <a href=https://mastodon.social/tags/MotivationalGuru class="mention hashtag" rel=tag>#<span>MotivationalGuru</span></a> <a href=https://mastodon.social/tags/WhisperGreatness class="mention hashtag" rel=tag>#<span>WhisperGreatness</span></a> <a href=https://mastodon.social/tags/ConquerTheWorld class="mention hashtag" rel=tag>#<span>ConquerTheWorld</span></a></p><p><a href=https://mastodon.social/tags/StochasticParrot class="mention hashtag" rel=tag>#<span>StochasticParrot</span></a> <a href=https://mastodon.social/tags/ChatGPT class="mention hashtag" rel=tag>#<span>ChatGPT</span></a> <a href=https://mastodon.social/tags/AIArt class="mention hashtag" rel=tag>#<span>AIArt</span></a> <a href=https://mastodon.social/tags/AIArtwork class="mention hashtag" rel=tag>#<span>AIArtwork</span></a></p><div class="toot-photos space-evenly"><div class=video-player><video controls>
<source src=https://files.mastodon.social/media_attachments/files/110/108/305/695/647/738/original/698f75600236c34a.mp4></video></div></div></div><a class=u-url style=display:none></a>
<a class=p-category href=https://mastodon.social/tags/motivationalguru style=display:none>motivationalguru</a>
<a class=p-category href=https://mastodon.social/tags/whispergreatness style=display:none>whispergreatness</a>
<a class=p-category href=https://mastodon.social/tags/conquertheworld style=display:none>conquertheworld</a>
<a class=p-category href=https://mastodon.social/tags/stochasticparrot style=display:none>stochasticparrot</a>
<a class=p-category href=https://mastodon.social/tags/chatgpt style=display:none>chatgpt</a>
<a class=p-category href=https://mastodon.social/tags/aiart style=display:none>aiart</a>
<a class=p-category href=https://mastodon.social/tags/aiartwork style=display:none>aiartwork</a></article></div><h3 id=a-fun-experiment>A fun experiment</h3><p>Overall, writing this bot was a fun experiment - but I probably learned more about writing better pipelines, than I did about AI and LLMs. What did surprise me was how often the responses seem to be to questions that were not asked - where are these responses being generated? Are we seeing the flicker of AGI? Or just the stochastic ramblings of a machine run by some <a href=https://www.latimes.com/business/technology/story/2023-03-31/column-afraid-of-ai-the-startups-selling-it-want-you-to-be target=_blank>sketchy people</a>
.</p></div></div><div class=post><div class=post-heading><h1><a href=https://tane.dev/2021/02/announcing-formula-a-zero-config-reactive-forms-library-for-svelte/>Announcing Formula - A Zero-Config Reactive Forms Library for Svelte</a></h1><div class=meta><i class="far fa-calendar-edit" title="The date when this post was originally published" aria-label="The date when this post was originally published"></i><span>&nbsp;Published: Feb 13, 2021</span>
&nbsp;<span title="The date I last noticed a typo" aria-label="The date I last noticed a typo">(last updated: Feb 13, 2021)</span>
|&nbsp;<i class="far fa-pencil" title="The number of semi-coherent words I managed to produce" aria-label="The number of semi-coherent words I managed to produce"></i><span>~ 400 words</span>
|&nbsp;<i class="far fa-clock" title="Time is an illusion. Lunchtime doubly so" aria-label="Time is an illusion. Lunchtime doubly so"></i><span>~ 2 minutes reading time</span></div><div class=tags title="Click the links in this to go to a page based on a tag value" aria-label="Click the links in this to go to a page based on a tag value"><a class=flex-item href=https://tane.dev/tags/svelte>Svelte</a>
<a class=flex-item href=https://tane.dev/tags/library>Library</a>
<a class=flex-item href=https://tane.dev/tags/forms>Forms</a>
<a class=flex-item href=https://tane.dev/tags/html-forms>HTML Forms</a>
<a class=flex-item href=https://tane.dev/tags/accessible-forms>Accessible Forms</a></div></div><div class=post-content><ul><li><a href=https://svelte.dev/repl/7ec545c5415049d1a51167d1ac10b137 target=_blank>Demo</a></li><li><a href=https://www.npmjs.com/package/svelte-formula target=_blank>NPM Page</a></li></ul><p>Today I&rsquo;m happy to announce the release of <a href=https://www.npmjs.com/package/svelte-formula target=_blank>Svelte Formula</a>
- a new forms
library for <a href=https://svelte.dev target=_blank>Svelte</a>
.</p><div style=text-align:center><img width=250px height=250px src=https://tane.dev/images/formula-logo.png alt="The Svelte Formula Logo is some science beakers and a molecule"></div><p>Formula is a <code>Zero-Config</code> library - what this means is that you do not have to pass any settings to the library itself
to handle form validation and submission - it uses the validation properties of HTML5 forms directly, meaning you can
create progressive, accessible forms first.</p><p>The library is for use with the <a href=https://svelte.dev/docs#use_action target=_blank>use directive</a>
and can be bound to any element, not
just <code>&lt;form></code> ones and the library automatically handles subscription and unsubscription to any form element with
a <code>name</code> attribute.</p><p>Here is the example from the demo:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onDestroy</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;svelte&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>formula</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;svelte-formula@0.0.5&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> {<span style=color:#a6e22e>form</span>, <span style=color:#a6e22e>formValues</span>, <span style=color:#a6e22e>validity</span>, <span style=color:#a6e22e>touched</span>, <span style=color:#a6e22e>formValid</span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>formula</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sub</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>formValues</span>.<span style=color:#a6e22e>subscribe</span>(<span style=color:#a6e22e>v</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>v</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onDestroy</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sub</span>();
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>use:form</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;form-field&#39;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;username&#39;</span>&gt;Username&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;text&#39;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;username&#39;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;username&#39;</span> <span style=color:#a6e22e>required</span> <span style=color:#a6e22e>minlength</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;8&#34;</span> <span style=color:#a6e22e>class:error</span><span style=color:#f92672>=</span><span style=color:#e6db74>{$touched?.username</span> <span style=color:#960050;background-color:#1e0010>&amp;&amp;</span>
</span></span><span style=display:flex><span>           <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>validity</span><span style=color:#960050;background-color:#1e0010>?.</span><span style=color:#a6e22e>username</span><span style=color:#960050;background-color:#1e0010>?.</span><span style=color:#a6e22e>invalid</span><span style=color:#960050;background-color:#1e0010>}</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>hidden</span><span style=color:#f92672>=</span><span style=color:#e6db74>{$validity?.username?.valid}</span>&gt;{$validity?.username?.message}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;form-field&#39;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;password&#39;</span>&gt;Password&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#a6e22e>required</span> <span style=color:#a6e22e>minlength</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;8&#34;</span> <span style=color:#a6e22e>class:error</span><span style=color:#f92672>=</span><span style=color:#e6db74>{$touched?.password</span> <span style=color:#960050;background-color:#1e0010>&amp;&amp;</span>
</span></span><span style=display:flex><span>           <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>validity</span><span style=color:#960050;background-color:#1e0010>?.</span><span style=color:#a6e22e>username</span><span style=color:#960050;background-color:#1e0010>?.</span><span style=color:#a6e22e>invalid</span><span style=color:#960050;background-color:#1e0010>}</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>hidden</span><span style=color:#f92672>=</span><span style=color:#e6db74>{$validity?.password?.valid}</span>&gt;{$validity?.password?.message}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>{!$formValid}</span>&gt;Save&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>form-field</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-bottom</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border-bottom</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#66d9ef>lightgrey</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>error</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>In this example the only validations are <code>required</code> and <code>minlength</code> applied directly to the HTML element itself -
displaying errors and error states are via the <code>validity</code> object and the <code>touched</code> object allows us to only apply it
when the form element is first focused on.</p><p>The release is considered an <code>alpha</code> version - the API may change and there are still tests and documentation to right -
but you can try it our right now in your own project with <code>npm install svelte-formula</code> - any bugs, issues or suggestions
please feel free to <a href=https://github.com/tanepiper/svelte-plugins/issues target=_blank>leave them here</a></p></div></div><div class=post><div class=post-heading><h1><a href=https://tane.dev/2021/02/revisiting-dark-patterns-with-the-html-dialog-tag/>Revisiting Dark patterns with the HTML &lt;dialog> tag</a></h1><div class=meta><i class="far fa-calendar-edit" title="The date when this post was originally published" aria-label="The date when this post was originally published"></i><span>&nbsp;Published: Feb 8, 2021</span>
&nbsp;<span title="The date I last noticed a typo" aria-label="The date I last noticed a typo">(last updated: Feb 12, 2021)</span>
|&nbsp;<i class="far fa-pencil" title="The number of semi-coherent words I managed to produce" aria-label="The number of semi-coherent words I managed to produce"></i><span>~ 1200 words</span>
|&nbsp;<i class="far fa-clock" title="Time is an illusion. Lunchtime doubly so" aria-label="Time is an illusion. Lunchtime doubly so"></i><span>~ 6 minutes reading time</span></div><div class=tags title="Click the links in this to go to a page based on a tag value" aria-label="Click the links in this to go to a page based on a tag value"><a class=flex-item href=https://tane.dev/tags/html>HTML</a>
<a class=flex-item href=https://tane.dev/tags/javascript>JavaScript</a>
<a class=flex-item href=https://tane.dev/tags/browser>Browser</a>
<a class=flex-item href=https://tane.dev/tags/security>Security</a>
<a class=flex-item href=https://tane.dev/tags/ecmascript>ECMAScript</a>
<a class=flex-item href=https://tane.dev/tags/tutorial>Tutorial</a></div></div><div class=post-content><p>Every once in a while I&rsquo;ll see frontend developers tweet or blog about how great the
HTML <a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog target=_blank>dialog</a>
tag is and each time I&rsquo;m reminded me of
an <a href=https://tinynodes.medium.com/dark-patterns-with-the-html-5-2-dialog-tag-and-chrome-for-fun-and-profit-249ce092d200 target=_blank>old Medium post</a>
I made a few years ago about its use.</p><p>The <strong>good</strong> news is in 2021 it&rsquo;s much harder to use it to crash a user&rsquo;s browser - in
Firefox <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=840640" target=_blank>dialog.showModal is behind a flag</a>
so it has to be
specifically enabled by users. In all browsers <strong>preferred</strong> way to use this tag in 2021 is to use the <code>open</code> attribute
which is a much more sensible way of using the tag. However, it
is <a href=https://stackblitz.com/edit/dialog-dark-patterns-property target=_blank>still possible</a>
to do some things mentioned below
and <a href=https://tane.dev/images/firefox-dialog-performance.png>kill browser performance</a>
(and it&rsquo;s still possible to steal focus in
Chrome).</p><p>I thought it would be a good opportunity to revisit it as I feel it still has issues that makes it a <em>potentially</em>
dangerous tag to use on the web <em>without thinking about the implementation</em>. One thing that blogpost (and me pointing it
out) does is bring out people to say it&rsquo;s nothing to do with the platform&mldr;</p><p><img src=https://tane.dev/images/do-shit-with-browsers.png alt="So you discovered you can do shit in the browser an mess with the user"><br><img src=https://tane.dev/images/haters-gonna-hate.png alt="Except that nothing of this is related to the dialog tag, nor is the fact that it&amp;rsquo;s &amp;ldquo;built-in&amp;rdquo;. If the argument is &amp;ldquo;the built-in dialog should be restricted so that people can&amp;rsquo;t abuse it&amp;rdquo;, all you&amp;rsquo;re doing is making sure abusers use a div (or different elem) as dialog instead."></p><p>Certainly, some people didn&rsquo;t agree - and it would be a valid suggestions to say this is achievable in other ways.
However, several years later I still stand by my original points:</p><ul><li>By
default, <a href=https://stackblitz.com/edit/dialog-dark-patterns-with-div target=_blank>library modals do not completely steal the users mouse focus</a>
even when in a loop of generating modals you can click elsewhere on the page (although of course they always can be
made to!)</li><li>It&rsquo;s still very easy to <a href=https://tane.dev/images/firefox-dialog-performance.png>kill browser performance</a>
very easily, very quickly
because there is no limit to the number of dialogs that can be created</li><li>The <code>&lt;dialog></code> tag is built into the platform, so there&rsquo;s no way to stop its use by blocking any offending library
code - bad actors have all the tools to do this available in the DOM with a single HTML file.</li><li>A single API is also a single attack surface - any script injection attacks don&rsquo;t have to worry about library-specific
implementations - they can
<strong>always</strong> rely on <code>document.getElementsByTagName('dialog')</code> to access <code>&lt;dialog></code> elements on the page.</li></ul><p>Over the last few years, users have also been taught bad habits to click any popup in operating systems, or in the
browser through the use of Cookie popups, newsletter popups and other generally badly implemented ideas.</p><h2 id=revisiting-the-hacks>Revisiting The Hacks</h2><p>Now on StackBlitz, I&rsquo;m using the <a href=https://stackblitz.com/edit/dialog-dark-patterns target=_blank>same demo as before</a>
with some
updates. The example does the following:</p><ul><li>Adds a listener over the close button which, when the user hovers over it disables the button and moves the modal.</li><li>Adds a second close button that when pressed closes the modal but also triggers an undesirable path (such as
installing malware because we have
a <a href=https://developer.mozilla.org/en-US/docs/Web/API/Event/isTrusted target=_blank>trusted user-triggered Event</a>
that allows Web
APIs)</li><li>2 Buttons that send you into a loop of death in infinitely creating modals that can&rsquo;t be escaped, and always steals
focus.</li><li>Hijacking the users keyboard, so users cannot use <code>Esc</code>, not can they <code>Tab</code> away from the dialog or use <code>Space</code> to
click any buttons.</li></ul><h2 id=overriding-the-dom-for-fun>Overriding the DOM for fun</h2><p>One issue is that you pretty much have full control over the DOM of the dialog. This is good in many ways, but with
great power&mldr;</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createModal</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>button</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;button&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Close Me&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>moveModal</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#34;disabled&#34;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;LOL&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lastX</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>newModal</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>top</span> <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lastY</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>newModal</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>left</span> <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>newModal</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>transform</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`translate(</span><span style=color:#e6db74>${</span>(<span style=color:#a6e22e>lastX</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>250</span><span style=color:#e6db74>}</span><span style=color:#e6db74>px, </span><span style=color:#e6db74>${</span>(<span style=color:#a6e22e>lastY</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>?</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>250</span><span style=color:#e6db74>}</span><span style=color:#e6db74>px)`</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>removeAttribute</span>(<span style=color:#e6db74>&#34;disabled&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;mouseenter&#39;</span>, <span style=color:#a6e22e>moveModal</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></td></tr></table></div></div><p>With our annoying button, we use this to control the <code>transform</code> style of the modal itself and move it beyond the reach
of the user. We add a second button that does close the modal using a call to <code>modal.close()</code> but after that we can
trigger any JavaScript we want, such as loading new tabs, running bitcoin miners, searching for aliens, etc.</p><blockquote><p>My argument here is that outside of styling some parts of the look and feel, it should not be possible to mess with
the dialog after it has been presented.</p></blockquote><h2 id=blocking-the-escape-route>Blocking the Escape Route</h2><p>Of course most users might try press the Escape key in hopes that whatever is on the screen will disappear, but we have
that particular route covered.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keyEvents</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Backspace&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Tab&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Enter&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Escape&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Space&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ArrowLeft&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ArrowUp&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ArrowRight&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ArrowDown&#34;</span>
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>document.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;keyup&#34;</span>, <span style=color:#a6e22e>event</span> =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyEvents</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>code</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createModal</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p>In this case we hijack when we detect the code for the <code>Escape</code> key, as well as any other buttons the user might try to
use to escape - and we use it to just keep clicking the open button for creating more modals.</p><blockquote><p>My argument here is when a dialog is displayed, don&rsquo;t allow JavaScript to hijack the keyboard and stop the user from
closing the dialog - this is also bad for accessibility.</p></blockquote><h2 id=killing-the-browser>Killing the Browser</h2><p><strike>It‚Äôs quite easy to create a stack overflow</strike> In 2021 it&rsquo;s less easy to create a Stack Overflow with the
dialog, but it is still possible to slow down the users browser and spike CPU by just calling a setInterval on it:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleKill1</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setInterval</span>(<span style=color:#a6e22e>createModal</span>, <span style=color:#ae81ff>1000</span>);  <span style=color:#75715e>// 1 second here is generous - but we could do it every 1ms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></td></tr></table></div></div><p>Here we can see that we get a lot of spikes in CPU usage and memory garbage collection is constantly triggered:</p><p><a href=https://tane.dev/images/heap-image.png><img src=https://tane.dev/images/heap-image-small.png alt="A Chrome performance graph showing CPU and memory usage"></a></p><blockquote><p>My argument here is to limit the number of dialogs that can be shown on screen at once - modern browsers already do this for
<code>alert</code> - allowing the user to set <code>Don't show popus anymore for this website</code> when it&rsquo;s abused by developers.</p></blockquote><h2 id=component-solution>Component Solution</h2><p>One way around this in your own code is to use the <code>&lt;dialog></code> tag only within your own components - I‚Äôve
created <a href=https://stackblitz.com/edit/dialog-dark-patterns-shadowroot target=_blank>another example with a web component</a>
that embeds
the dialog in to a <a href=https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot target=_blank>ShadowRoot</a>
and provides the global a
state, so you cannot open more than one at a time and third-party scripts cannot access the internal <code>&lt;dialog></code>.</p><p>Hopefully you enjoy the demo and this post. I&rsquo;m not against the use of dialogs themselves - but I think providing some
way to limit the number of modals that can be shown, and limit what can and cannot be changed within it would provide a
deeper layer of secure use across the web platform.</p></div></div><div class=post><div class=post-heading><h1><a href=https://tane.dev/2021/02/webserial.app-browser-to-usb-serial-communication-with-svelte/>WebSerial.app - Browser to USB Serial Communication With Svelte</a></h1><div class=meta><i class="far fa-calendar-edit" title="The date when this post was originally published" aria-label="The date when this post was originally published"></i><span>&nbsp;Published: Feb 5, 2021</span>
&nbsp;<span title="The date I last noticed a typo" aria-label="The date I last noticed a typo">(last updated: Feb 12, 2021)</span>
|&nbsp;<i class="far fa-pencil" title="The number of semi-coherent words I managed to produce" aria-label="The number of semi-coherent words I managed to produce"></i><span>~ 200 words</span>
|&nbsp;<i class="far fa-clock" title="Time is an illusion. Lunchtime doubly so" aria-label="Time is an illusion. Lunchtime doubly so"></i><span>~ 1 minutes reading time</span></div><div class=tags title="Click the links in this to go to a page based on a tag value" aria-label="Click the links in this to go to a page based on a tag value"><a class=flex-item href=https://tane.dev/tags/web-serial>Web Serial</a>
<a class=flex-item href=https://tane.dev/tags/svelte>Svelte</a>
<a class=flex-item href=https://tane.dev/tags/observables>Observables</a>
<a class=flex-item href=https://tane.dev/tags/rxjs>RxJS</a>
<a class=flex-item href=https://tane.dev/tags/typescript>TypeScript</a>
<a class=flex-item href=https://tane.dev/tags/application>Application</a></div></div><div class=post-content><p>After
my <a href=https://tane.dev/2021/01/web-serial-api-with-rxjs-two-way-reactive-communication-between-browser-and-serial-hardware/ target=_blank>previous experiments</a>
with the Web Serial API, I started experimenting with <a href=https://svelte.dev/ target=_blank>Svelte</a>
.</p><p>Within a couple of days I have created <a href=https://webserial.app/ target=_blank>https://webserial.app/</a>
- the Web Serial Controller app.</p><p>The interface might seem familiar - it&rsquo;s based on <a href=https://webserial.app/ target=_blank>XP.css</a>
- a Windows XP CSS theme. It was
inspired by some of the Serial hardware software used in the 00&rsquo;s.</p><p><img src=https://tane.dev/images/web-serial-api-screenshot.png alt="The interface of Web Serial Controller"></p><p>The application is <a href=https://github.com/tanepiper/web-serial-controller target=_blank>fully open source</a>
and features:</p><ul><li>Fully connected state - use the screens or keyboard shortcuts to connect and disconnect from devices with shared state</li><li>Filter devices by vendor ID with a fully searchable list of all hardware vendors</li><li>A draggable interface XP-like interface</li><li>Options storage in <code>localStorage</code></li><li>Send text messages to any connected device</li></ul></div></div><div class=post><div class=post-heading><h1><a href=https://tane.dev/2021/01/web-serial-api-with-rxjs-two-way-reactive-communication-between-browser-and-serial-hardware/>Web Serial API with RxJS - Two-Way Reactive Communication between Browser and Serial Hardware</a></h1><div class=meta><i class="far fa-calendar-edit" title="The date when this post was originally published" aria-label="The date when this post was originally published"></i><span>&nbsp;Published: Jan 30, 2021</span>
&nbsp;<span title="The date I last noticed a typo" aria-label="The date I last noticed a typo">(last updated: Feb 12, 2021)</span>
|&nbsp;<i class="far fa-pencil" title="The number of semi-coherent words I managed to produce" aria-label="The number of semi-coherent words I managed to produce"></i><span>~ 1100 words</span>
|&nbsp;<i class="far fa-clock" title="Time is an illusion. Lunchtime doubly so" aria-label="Time is an illusion. Lunchtime doubly so"></i><span>~ 6 minutes reading time</span></div><div class=tags title="Click the links in this to go to a page based on a tag value" aria-label="Click the links in this to go to a page based on a tag value"><a class=flex-item href=https://tane.dev/tags/typescript>TypeScript</a>
<a class=flex-item href=https://tane.dev/tags/rxjs>RxJS</a>
<a class=flex-item href=https://tane.dev/tags/observables>Observables</a>
<a class=flex-item href=https://tane.dev/tags/web-serial>Web Serial</a>
<a class=flex-item href=https://tane.dev/tags/ecmascript>ECMAScript</a>
<a class=flex-item href=https://tane.dev/tags/tutorial>Tutorial</a></div></div><div class=post-content><ul><li><a href=https://rxjs-from-web-serial.stackblitz.io/ target=_blank>Demo Link</a></li><li><a href="https://stackblitz.com/edit/rxjs-from-web-serial?file=index.ts" target=_blank>Demo Source</a></li></ul><p>Version 89 of Chrome and Edge browsers have released the <a href=https://reillyeon.github.io/serial/ target=_blank>Web Serial API</a>
unflagged
which means as user it&rsquo;s now available for general use rather than being locked behind experimental flags (if you&rsquo;re
on an earlier version you can enable <strong>Experimental Web Platform features</strong> in <code>chrome://flags</code>)</p><p>The API allows for communication between the browser and supported serial hardware such
as <a href=https://www.arduino.cc/ target=_blank>Arduino</a>
or <a href=https://www.raspberrypi.org/ target=_blank>RaspberryPi</a>
over USB Serial connection - the
device registers as available to the browser and a port can be opened.</p><p>If you don&rsquo;t have any hardware to connect to, you can easily test it using a Bluetooth Serial connection - provided your
computer has a Bluetooth module you can connect your mobile device to it and use the appropriate software.</p><ul><li>For Android <a href="https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal&amp;hl=en&amp;gl=US" target=_blank>Serial Bluetooth Terminal</a></li><li>For iOS <a href=https://apps.apple.com/us/app/ble-to-serial-terminal/id1238004134 target=_blank>BLE to Serial Terminal</a>
.</li></ul><h2 id=connecting-browser-to-hardware>Connecting Browser to Hardware</h2><p>To request access to a device, a call needs to be made to the newly available function <code>navigator.serial.requestPort</code>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>startButton</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;start&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>startButton</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;click&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>navigator</span>.<span style=color:#a6e22e>serial</span>.<span style=color:#a6e22e>requestPort</span>();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// We can now access the serial device by opening it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// e.g. await port.open({baudRate: 9600})
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// The prompt has been dismissed without selecting a device.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p>This function is part of a set that <strong>must</strong> be called from a specific set of user interactions such as <code>touch</code> or
<code>click</code> events - in the demo
after a user gesture such as a button click - you cannot just call <code>requestPort</code> from your code without some kind of
user interaction as this will cause a security violation. You also must call it from a location that does not have
policy set up to disable this (you can see this in the demo above - if you try run it in the editor it won&rsquo;t work due to
the <code>&lt;iframe></code> not having the correct policy).</p><p>You may also need to install the <a href=https://www.npmjs.com/package/@types/w3c-web-serial target=_blank>w3c-web-serial types</a>
in your
project to make sure you have the available types on the <code>navigator</code> object and global types such as <code>SerialPort</code>.</p><p>To get a port, call <code>navigator.serial.requestPort</code> inside the handler - it will return a Promise that contains the port
object - you can also wrap it in a <code>try/catch</code> to handle when the user cancels device selection.</p><p>The port object once created must be called with the <code>open</code> method - the only required property of the options is the
<code>baudRate</code> which is the maximum bits-per-second transferred but there
are <a href=https://reillyeon.github.io/serial/#open-method target=_blank>other options</a>
based on the requirements of the device.</p><p>Once opened the port can return a <a href=https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream target=_blank>ReadableStream</a>
and <a href=https://developer.mozilla.org/en-US/docs/Web/API/WritableStream target=_blank>WritableStream</a>
which allows data to be passed to
and from the device.</p><h2 id=our-rxjs-operator>Our RxJS Operator</h2><p>To turn this into an RxJS operator we&rsquo;ll consume the port and set up the functionality to both read and write to the
serial bus. You
can <a href=https://github.com/rxjs-ninja/rxjs-ninja/blob/main/libs/rxjs/utility/src/lib/from-web-serial.ts target=_blank>read the full source code</a>
to see how the final Observable was created, but we&rsquo;ll cover the important sections below.</p><h2 id=reading-from-the-serial-bus>Reading from the Serial Bus</h2><p>Once connected, the serial device can start sending data to us - as it&rsquo;s a <code>ReadableStream</code> the result will be
a <code>UInt8Array</code>.</p><p>Here we&rsquo;ll set up an iterable reader for our stream - while the result is not <code>done</code> and the port is still readable,
we&rsquo;ll continue to read the source and emit it to the subscriber of the Observable. If the reader has completed, or the
port has been closed we&rsquo;ll end this iteration.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>port</span>.<span style=color:#a6e22e>open</span>({<span style=color:#a6e22e>baudRate</span>: <span style=color:#66d9ef>9600</span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>process</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span>: <span style=color:#66d9ef>ReadableStreamReadResult</span>&lt;<span style=color:#f92672>Uint8Array</span>&gt;
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>ReadableStreamReadResult</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>Uint8Array</span>&gt;<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>subscriber</span>.<span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>done</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>port</span>.<span style=color:#a6e22e>readable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>?</span> <span style=color:#a6e22e>reader</span>.<span style=color:#a6e22e>read</span>().<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>process</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>result</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>port</span>.<span style=color:#a6e22e>readable</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>port</span>.<span style=color:#a6e22e>readable</span>.<span style=color:#a6e22e>getReader</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reader</span>.<span style=color:#a6e22e>read</span>().<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>process</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>As the output of our Observable is a <code>Uint8Array</code>. Depending on your needs you can decode this to the format you need,
but in most cases it will be text content - here we can use
a <a href=https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder target=_blank>TextDecoder</a>
to get the value:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>decoder</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TextDecoder</span>(<span style=color:#e6db74>&#34;utf-8&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fromWebSerial</span>(<span style=color:#a6e22e>port</span>).<span style=color:#a6e22e>pipe</span>(
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tap</span>(<span style=color:#a6e22e>value</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Value is a UInt8Array, we can append to a element by decoding it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>outputEl</span>.<span style=color:#a6e22e>innerHTML</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>decoder</span>.<span style=color:#a6e22e>decode</span>(<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>).<span style=color:#a6e22e>subscribe</span>()
</span></span></code></pre></td></tr></table></div></div><h2 id=writing-to-the-serial-bus>Writing to the Serial Bus</h2><p>The API also allows for writing data to the device, here we can use another <code>Observable</code> that emits a string and provide
it to our function as a source, then we can hook it up to the ports <code>WritableStream</code>.</p><p>Instead of directly writing, we will create
a <a href=https://developer.mozilla.org/en-US/docs/Web/API/TransformStream target=_blank>TextEncoderStream</a>
- this allows us to create a new
internal writer that we have more control over - it contains both a reader and writer we use this to connect our
sources.</p><p>The reader from our encoder will be piped to the ports <code>WritableStream</code>, and the writer passed
to <a href=https://github.com/rxjs-ninja/rxjs-ninja/blob/main/libs/rxjs/utility/src/lib/to-writable-stream.ts target=_blank>toWritableStream</a>
which connects the <code>Observable</code> to the writer:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>writerSource</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>port</span>.<span style=color:#a6e22e>writable</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>encoder</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TextEncoderStream</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>writerEnd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>encoder</span>.<span style=color:#a6e22e>readable</span>.<span style=color:#a6e22e>pipeTo</span>(<span style=color:#a6e22e>port</span>.<span style=color:#a6e22e>writable</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>outputStream</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>encoder</span>.<span style=color:#a6e22e>writable</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>writer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>outputStream</span>.<span style=color:#a6e22e>getWriter</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>writerSource</span>.<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>toWritableStream</span>(<span style=color:#a6e22e>writer</span>, <span style=color:#a6e22e>signal</span>)).<span style=color:#a6e22e>subscribe</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Now we can pass the <code>Observable</code> and use it to emit our values:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>emitter$</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Subject</span>&lt;<span style=color:#f92672>string</span>&gt;();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fromWebSerial</span>(<span style=color:#a6e22e>port</span>, <span style=color:#a6e22e>emitter$</span>.<span style=color:#a6e22e>asObservable</span>()).<span style=color:#a6e22e>subscribe</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>emitter$</span>.<span style=color:#a6e22e>next</span>(<span style=color:#e6db74>&#39;Hello There!&#39;</span>);
</span></span></code></pre></td></tr></table></div></div><h2 id=creating-a-serial-chat-app>Creating a Serial Chat App</h2><p>Now we can read from, and write to, our hardware device
the <a href=https://github.com/svendahlstrand/web-serial-api target=_blank>possibilities are endless</a>
with what we can do - provided the
hardware supports it.</p><p>For this tutorial I build a <a href=https://rxjs-from-web-serial.stackblitz.io/ target=_blank>very basic chat app</a>
- using the Bluetooth
Serial applications mentioned above you can use it to send and receive text data between devices.</p><p><img src=https://tane.dev/images/web-serial-mobile.jpg alt="A screenshot of a web serial mobile app">
<img src=https://tane.dev/images/web-serial-browser.png alt="A screenshot of a web serial browser app"></p><p>In the <a href="https://stackblitz.com/edit/rxjs-from-web-serial?file=index.ts" target=_blank>example code</a>
I&rsquo;ve set up a button to enable
our port request - you should see a popup with a list of devices available for you to use. After connecting
a basic chat interface will show up - type in some text and check out your device software - you should see the same
message there, and you can then send a message back to the browser.</p><p>Hopefully you&rsquo;ve found this tutorial useful and if you do build something with this I&rsquo;d love to hear about it!</p><h2 id=a-collection-of-pre-built-operators-and-observables-for-your-projects>A collection of pre-built operators and Observables for your projects</h2><p><img src=https://raw.githubusercontent.com/rxjs-ninja/rxjs-ninja/main/assets/logo.png alt="The RxJS Logo, a Ninja jumping over a moon"></p><p><a href=https://rxjs.ninja target=_blank>RxJS Ninja</a>
- is a collection of over 130 operators for working with various types of data (such
as <a href=https://rxjs.ninja/modules/array.html target=_blank>arrays</a>
, <a href=https://rxjs.ninja/modules/number.html target=_blank>numbers</a>
) and
<a href=https://rxjs.ninja/modules/utility.html#Streams target=_blank>streams</a>
allowing for modifying, filtering and querying the data.</p><p>Still in active development, you might find useful operators that provide clearer intent for your RxJS code.</p><p>You can check out the source code on <a href=https://github.com/rxjs-ninja/rxjs-ninja target=_blank>GitHub</a>
.</p></div></div><div class=text-center><ul class="pagination pagination-default"><li class="page-item disabled"><a aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a></li><li class="page-item disabled"><a aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a></li><li class="page-item active"><a aria-current=page aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=https://tane.dev/takeoff/blog/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=https://tane.dev/takeoff/blog/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class=page-item><a href=https://tane.dev/takeoff/blog/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=https://tane.dev/takeoff/blog/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=https://tane.dev/takeoff/blog/4/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></main></div></div><footer></footer><script src=https://tane.dev/vendor/rxjs.umd.min.cfc67dfcb1df9b0e06f96ac2e2bf29507e56ff70c80563ef778250b702add65b76253e3a28b4528f9baadca92b9b2d35f64884365ff4ae673dfeb3d0c3b61a91.js integrity="sha512-z8Z9/LHfmw4G+WrC4r8pUH5W/3DIBWPvd4JQtwKt1lt2JT46KLRSj5uq3Kkrmy019kiENl/0rmc9/rPQw7YakQ=="></script>
<script src=https://tane.dev/js/bundle.min.c218495446b0af055063d5a2d131d9bdbf1346a6d558d6843997c8c69e4e1f41106b5a32b053482d4fc6c6dd7c3ac1d18e0039a33506d68f311d5b6e37429eb4.js integrity="sha512-whhJVEawrwVQY9Wi0THZvb8TRqbVWNaEOZfIxp5OH0EQa1oysFNILU/Gxt18OsHRjgA5ozUG1o8xHVtuN0KetA==" defer></script>
<script async data-id=101405924 src=//static.getclicky.com/js></script></body></html>